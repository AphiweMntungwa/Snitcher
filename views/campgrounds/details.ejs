<% layout("layouts/boilerplate")%>
    <link rel="stylesheet" href="/css/showstyles.css">
    <link rel="stylesheet" href="/css/starability.css">
    <div class="d-flex">
        <section>
            <img src="<%=selectCamp.image%>" alt="image not found">
            <div><b>
          <%=selectCamp.title%>
        </b></div>
            <h6>
                <%=selectCamp.location%>
            </h6>
            <div>
                <%=selectCamp.description%>
            </div><br>
            <div class="author">
                posted by -
                <%=  selectCamp.author.username   %>
            </div>
            <% if (currentUser && selectCamp.author._id.equals(currentUser._id)){%>
                <div class="buttons">
                    <a href="/index/<%=selectCamp._id%>/edit" class=" btn btn-success">Edit</a>
                    <a href="/index" class="btn btn-info">Campgrounds</a>
                    <form class="d-inline" action="/index/<%=selectCamp._id%>?_method=DELETE" method="post">
                        <button id="reset" class=" btn btn-danger">Delete</button>
                    </form>
                </div>
                <% } %>
                    <span id="secondspanid"><%= selectCamp._id %> </span>
                    <br>

        </section>
        <section>
            <div class="mt-3 reviewpadding">
                <b>Leave a Review: </b>
                <form class="form-control">
                    <!-- <input type="range" class="form-range submit-range" min="0" max="5" step="1" name="rating"> -->
                    <fieldset class="starability-basic">
                        <input type="radio" id="no-rate" class="input-no-rate" name="rating" value="0" checked aria-label="No rating." />
                        <input type="radio" id="first-rate1" name="rating" value="1" />
                        <label for="first-rate1" title="Terrible">1 star</label>
                        <input type="radio" id="first-rate2" name="rating" value="2" />
                        <label for="first-rate2" title="Not good">2 stars</label>
                        <input type="radio" id="first-rate3" name="rating" value="3" />
                        <label for="first-rate3" title="Average">3 stars</label>
                        <input type="radio" id="first-rate4" name="rating" value="4" />
                        <label for="first-rate4" title="Very good">4 stars</label>
                        <input type="radio" id="first-rate5" name="rating" value="5" />
                        <label for="first-rate5" title="Amazing">5 stars</label>
                    </fieldset>
                    <textarea name="body" required placeholder="review..." class="form-control bg-light submit-body" cols="35" rows="2"></textarea>
                    <button id="longbutton">submit review</button>
                </form>

                <div class="card mt-2 me-4 reviewdiv display-none-card">
                    <div class="card-body">
                        <div class="input-group-prepend mb-1 d-inline">
                            <span class="input-group-text d-inline py-1 px-2 rating"><span id="rating">
                  
                </span></span>
                        </div>

                        <div class="input-group-prepend mb-1 d-inline icon" id="options">
                            <span id="optionspan" class="input-group-text bg-secondary d-inline py-1 px-2"><i class="fas fa-bars"></i></span>
                        </div>

                        <div class="card dropdown">
                            <button class="editReview">edit</button>
                            <button class="deletereviewbutton">delete</button>
                        </div>
                        <span id="spanid">  </span>
                        <form class="form-control toggleform">
                            <input type="range" class="form-range range" min=0 max=5 name="reviews[rating]" id="range">
                            <textarea class="form-control textareas" name="reviews[body]" id="body" cols="30" rows="3"></textarea>
                            <button class="submitreview">edit</button>
                        </form>

                        <div class="updatediv" style="margin-left: 0;"><i style="color:blue;">
                
              </i></div>
                    </div>
                    <!-- <h7 class="card-subtitle text-muted" style="margin-left :210px;"> </h7> -->
                </div>

                <% for(review of selectCamp.reviews){ %>
                    <div class="card mt-2 me-4 reviewdiv">
                        <div class="card-body">
                            <div class="input-group-prepend mb-1 d-inline">
                                <span class="input-group-text d-inline py-1 px-2 rating"><span id="rating">
                    <%= review.rating %>
                  </span></span>
                            </div>

                            <!-- <% if (currentUser && review.author._id.equals(currentUser._id)){%> 
                   <cite class="d-none">Authorised</cite>
              <% } %> -->
                            <div class="input-group-prepend mb-1 icon" id="options">
                                <span id="optionspan" class="input-group-text bg-secondary d-inline py-1 px-2"><i class="fas fa-bars"></i></span>
                            </div>

                            <div class="card dropdown">
                                <button class="editReview">edit</button>
                                <button class="deletereviewbutton">delete</button>
                            </div>
                            <span id="spanid"> <%= review._id %> </span>
                            <form class="form-control toggleform">
                                <input type="range" class="form-range range" min=1 max=5 name="reviews[rating]" id="range">
                                <textarea class="form-control textareas" name="reviews[body]" id="body" cols="30" rows="3"><%=review.body.trim()%></textarea>
                                <button class="submitreview">edit</button>
                            </form>


                            <p class="starability-result star-rating mt-2" data-rating="<%= review.rating %>">
                                Rated:
                                <%= review.rating %> stars
                                    <h5>-
                                        <%= review.author.username %>
                                    </h5>
                            </p>


                            <div class="updatediv" style="margin-left: 0;"><i style="color:blue;">
                  <%= review.body %>
                </i></div>
                        </div>
                        <!-- <h7 class="card-subtitle text-muted" style="margin-left :210px;">-<%= review.author.username %> </h7> -->
                        <% if (currentUser && review.author._id.equals(currentUser._id)){%>
                            <cite class="d-none">Authorised</cite>
                            <% } %>

                    </div>
                    <% } %>
            </div><br>

        </section>

    </div>


    <script src="/js/reviewsJs.js"></script>